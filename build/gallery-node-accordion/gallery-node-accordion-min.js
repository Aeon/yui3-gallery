YUI.add("gallery-node-accordion",function(B){var k=B.ClassNameManager.getClassName,b={},h={fast:0.1,slow:0.6,normal:0.4},M="accordion",D="item",d="scrollHeight",j="scrollWidth",E="width",Z="height",m="px",Q="host",n="orientation",C="fade",a="multiple",O="persistent",o="speed",f="anim",X="items",W="triggerSelector",V="itemSelector",L="itemBodySelector",l=k(M),c=k(M,"hidden"),I=k(M,D),P=k(M,D,"active"),A=k(M,D,"sliding"),g=k(M,D,"hd"),e=k(M,D,"bd"),T=k(M,D,"bd","sliding"),N=k(M,D,"ft"),R=k(M,D,"trigger"),F=".",S=">.",G=" .",K=", ",U=S+I,i=F+e,J=U+F+R+K+U+S+F+R+K+U+S+g+G+R+K+U+S+N+G+R;function H(p,Y){return p.get("region")[Y];}B.namespace("Plugin").NodeAccordion=B.Base.create("NodeAccordion",B.Plugin.Base,[],{_root:null,_eventHandler:null,initializer:function(p){var Y=this;if((Y._root=Y.get(Q))){Y.get(X).each(function(q){if(q.hasClass(P)){Y.expandItem(q);}else{Y.collapseItem(q);}});Y._eventHandler=Y._root.delegate("click",function(q){Y.toggleItem(q.currentTarget);q.target.blur();q.halt();},Y.get(W));Y._root.replaceClass(c,l);}},destructor:function(){var Y=this;if(Y._eventHandler){Y._eventHandler.detach();}Y._eventHandler=null;},_slidingBegin:function(Y,p,q){Y.addClass(A);p.addClass(T);if(q){Y.addClass(P);}},_slidingEnd:function(Y,p,q){Y.removeClass(A);p.removeClass(T);if(q){Y.removeClass(P);}},_getItemBody:function(Y){var q,p=this.get(L);if(B.Lang.isNumber(Y)){Y=this.get(X).item(Y);}q=Y.one(p);if(!q){Y=Y.next();q=((Y&&Y.test(p))?Y:null);}return q;},_getItem:function(p){if(B.Lang.isNumber(p)){p=this.get(X).item(p);}var Y=function(q){return q.hasClass(I);};if(p&&!p.hasClass(I)){return p.ancestor(Y);}return p;},_animate:function(s,p,q){var r=b[s],Y=this;if((r)&&(r.get("running"))){r.stop();}if(B.Lang.isFunction(Y.get(f))){p.easing=Y.get(f);}r=new B.Anim(p);r.on("end",q,Y);r.run();b[s]=r;return r;},_openItem:function(z){var y=this,t,p,w,s,r,v=y.get(X),q=y.get(n),u={duration:y.get(o),to:{scroll:[]}},x,Y;if(z&&v.size()&&!z.hasClass(P)&&(t=y._getItemBody(z))&&(p=B.stamp(t))){if(!y.get(a)){x=y._root.one(S+P);}u.to[q]=(q==E?t.get(j):t.get(d));u.node=t;y._slidingBegin(z,t,true);w=function(){y._slidingEnd(z,t);};if(!y.get(f)){s=H(t,q);if(x&&(Y=y._getItemBody(x))){s=H(Y,q);y._slidingBegin(x,Y);}for(r=1;r<=u.to[q];r++){if(x&&Y){Y.setStyle(q,(s-r)+m);}t.setStyle(q,r+m);}if(x&&Y){y._slidingEnd(x,Y,true);}w();}else{u.to.scroll=[0,0];if(y.get(C)){u.to.opacity=1;}if(B.Lang.isObject(x)){y._closeItem(x);}y._animate(p,u,w);}}},_closeItem:function(x){var w=this,s,Y,v,r,q,u=w.get(X),p=w.get(n),t={duration:w.get(o),to:{scroll:[]}};if(x&&u.size()&&(s=w._getItemBody(x))&&(Y=B.stamp(s))){t.to[p]=(p==Z?w.get("minHeight"):w.get("minWidth"));t.node=s;w._slidingBegin(x,s);v=function(){w._slidingEnd(x,s,true);};if(!w.get(f)){r=H(s,p);for(q=r;q>=t.to[p];q--){s.setStyle(p,q+m);}v();}else{t.to.scroll=(p==E?[s.get(j),0]:[0,s.get(d)]);if(w.get(C)){t.to.opacity=0;}w._animate(Y,t,v);}}},expandAllItems:function(){var Y=this;if(Y.get(a)){Y.get(X).each(function(p){Y.expandItem(p);});}return Y;},collapseAllItems:function(){var Y=this;if(Y.get(a)||!Y.get(O)){Y.get(X).each(function(p){Y.collapseItem(p);});}return Y;},expandItem:function(q){var Y=this,p=Y._getItem(q);if(p){Y._openItem(p);}return Y;},collapseItem:function(q){var Y=this,p=Y._getItem(q);if(p&&p.hasClass(P)&&(Y.get(a)||!Y.get(O))){Y._closeItem(p);}return Y;},toggleItem:function(q){var Y=this,p=Y._getItem(q);if(p){if(p.hasClass(P)&&(Y.get(a)||!Y.get(O))){Y._closeItem(p);}else{Y._openItem(p);}}return Y;}},{NS:M,ATTRS:{activeItems:{readOnly:true,getter:function(Y){return this._root.all(S+P);}},items:{readOnly:true,getter:function(Y){return this._root.all(this.get(V));}},orientation:{value:Z,writeOnce:true},fade:{value:false},anim:{value:false,validator:function(Y){return !B.Lang.isUndefined(B.Anim);}},multiple:{value:true},persistent:{value:false},speed:{value:0.4,validator:function(Y){return(B.Lang.isNumber(Y)||(B.Lang.isString(Y)&&h.hasOwnProperty(Y)));},setter:function(Y){return(h.hasOwnProperty(Y)?h[Y]:Y);}},triggerSelector:{initOnly:true,value:J},itemSelector:{initOnly:true,value:U},itemBodySelector:{initOnly:true,value:i},minHeight:{value:0},minWidth:{value:0}}});},"@VERSION@",{requires:["node-base","node-style","plugin","base","node-event-delegate","classnamemanager"],optional:["anim"],skinnable:true});